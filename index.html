<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lyrics???</title>
    <style>

    </style>
</head>
<body>
    <form id="artistForm">
        <input type="text" id="artist" placeholder="Artist" value="Marshmello">
        <input type="text" id="song" placeholder="Song" value="Silence (feat. Khalid)">
        <input type="submit" value="Submit">
    </form>
    <script defer>
        async function getLyrics(artist, song) {
            // https://apic-desktop.musixmatch.com/ws/1.1/macro.subtitles.get?format=json&user_language=en&namespace=lyrics_synched&f_subtitle_length_max_deviation=1&subtitle_format=mxm&app_id=web-desktop-app-v1.0&usertoken=201219dbdb0f6aaba1c774bd931d0e79a28024e28db027ae72955c&q_track=Silence%20(feat.%20Khalid)&q_artist=Marshmello
            url = "https://cors-anywhere.herokuapp.com/" // Prevent CORS
                  + "https://apic-desktop.musixmatch.com/ws/1.1/macro.subtitles.get"
                  + "?format=json&user_language=en&namespace=lyrics_synched&f_subtitle_length_max_deviation=1&subtitle_format=mxm"
                  + "&app_id=web-desktop-app-v1.0&usertoken=201219dbdb0f6aaba1c774bd931d0e79a28024e28db027ae72955c"
                  + `&q_track=${encodeURIComponent(song)}&q_artist=${encodeURIComponent(artist)}`;
            console.log(url);
            response = await fetch(url, {
                headers: {
                    "Cookie": 'AWSELB=55578B011601B1EF8BC274C33F9043CA947F99DCFF0A80541772015CA2B39C35C0F9E1C932D31725A7310BCAEB0C37431E024E2B45320B7F2C84490C2C97351FDE34690157',
                    "Origin": 'musixmatch.com',
                },
                

            });
            data = await response.json();
            return data;
        }
        function parseLyrics(data) {
            let info = data["message"]["body"]["macro_calls"]["track.lyrics.get"]["message"]["body"]["lyrics"];
            let instrumental = false ? info.instrumental === 0 : true;
            let explicit = false ? info.explicit === 0 : true;
            return [instrumental, explicit];
        }
        document.getElementById("artistForm").addEventListener("submit", (e) => {
            e.preventDefault();
            let artist = document.getElementById("artist").value;
            let song = document.getElementById("song").value;
            getLyrics(artist, song).then((data) => {
                let lyrics = parseLyrics(data);
                instrumental = document.createElement("span");
                document.body.appendChild(instrumental);
                explicit = document.createElement("span");
                document.body.appendChild(explicit);

                instrumental.innerHTML = `<b>Instrumental</b>: ${lyrics[0].toString()}`;
                explicit.innerHTML = `<b>Instrumental</b>: ${lyrics[1].toString()}`;
            });
        });
    </script>  
</body>
</html>